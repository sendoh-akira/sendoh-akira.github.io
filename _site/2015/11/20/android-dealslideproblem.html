<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- 添加搜索关键字 -->
  <meta name="keywords" content="武燕飞,https://wuyanfeigithub.github.io/Sendoh-Akira/">

  <title>View滑动冲突的解决方案 | Sendoh Akira</title>
  <meta name="description" content="  当View的滑动存在冲突的时候怎么解决?">

  
  <link rel="stylesheet" href="/Sendoh-Akira/assets/css/bootstrap.css">
  <link rel="stylesheet" href="/Sendoh-Akira/assets/css/font-awesome.css">
  <link rel="stylesheet" href="/Sendoh-Akira/assets/js/fancybox/jquery.fancybox.css" media="screen">
  <link rel="stylesheet" href="/Sendoh-Akira/assets/css/main.css" >
  <link rel="stylesheet" href="/Sendoh-Akira/assets/js/prettify/prettify.css">
  <link rel="shortcut icon" href="/Sendoh-Akira/assets/img/favicon_2.png" />
  <link rel="canonical" href="https://wuyanfeigithub.github.io/Sendoh-Akira/Sendoh-Akira/2015/11/20/android-dealslideproblem.html">
  <link rel="alternate" type="application/rss+xml" title="Sendoh Akira" href="https://wuyanfeigithub.github.io/Sendoh-Akira/Sendoh-Akira/feed.xml" />
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/echarts.min.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/embed.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/ua-parser.js"></script>

  <script>var duoshuoQuery = {short_name:"wuyanfei"};</script>
</head>


  <body>

    <header class="site-header">
	<div class="container">
		<div class="row">
			<nav class="navbar navbar-default" role="navigation">
			
				    <div class="navbar-header col-xs-12 col-sm-12 col-md-3 col-lg-3 center" >
				   	      <button type="button" class="navbar-toggle" data-toggle="collapse"  data-target="#example-navbar-collapse">
					         <span class="icon-bar"></span>
					         <span class="icon-bar"></span>
					         <span class="icon-bar"></span>
					      </button>
					      <div class="sitehome">
						 	<a href="/Sendoh-Akira/" title="首页"><i class="fa fa-home fa-2x homeicon"></i><a><a class="site-title" href="/Sendoh-Akira/">Sendoh Akira</a>
						</div>
				   </div>
				  
				  
				  <div class="col-md-6 col-lg-6 hidden-xs hidden-sm center">				  			
							<nav class="site-nav">
								        <ul class="nav nav-pills">
											<li class="select"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/read.html">读书</a></li>
											<li class="select"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/class.html">分类</a></li>
											<li class="select"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/archive.html">归档</a></li>
											<li class="select"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/about.html">关于</a></li>
								        </ul>
							</nav>
				  </div>
				  
				   <div class="col-md-3 col-lg-3 hidden-xs hidden-sm">
				   		<!--<div class="search">
						  	<input type="text" class="search-query st-default-search-input" placeholder="Search">
				   		</div>-->
				   		<div class="search-tool" style="float: left;height: 45px;line-height: 45px;margin-left: 12px;">
							    <input type="text" class="form-control search-content" data-provide="search-content" style="display: inline-block !important; 
							    color: #49525c;
							    font-size: 14px;
							    line-height: 13px;
							    background-color: #e1eaf2;
							    border: 1px solid #045bb2;
							    border-radius: 4px;
							    box-shadow: inset 0 1px 3px rgba(0,0,0,.2),0 1px 0 rgba(255,255,255,.1);
							    outline: 0;
							    box-sizing: border-box;
							    -webkit-transition: all .2s ease-in-out;
							    transition: all .2s ease-in-out;" placeholder="Search this site" />
						</div>
							
						
				   </div>
				   
				   
				   <div class="collapse navbar-collapse" id="example-navbar-collapse">
						<ul class="nav navbar-nav phone-nav center">
							<li class="phoneselect"><a class="page-link pjaxlink" href="/Sendoh-Akira/"><i class="fa fa-home"></i>&nbsp;首页</a></li>
							<li class="phoneselect"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/read.html"><i class="fa fa-book"></i>&nbsp;读书</a></li>
							<li class="phoneselect"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/class.html"><i class="fa fa-tasks"></i>&nbsp;分类</a></li>
							<li class="phoneselect"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/tags.html"><i class="fa fa-tags"></i>&nbsp;标签</a></li>
							<li class="phoneselect"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/archive.html"><i class="fa fa-archive"></i>&nbsp;归档</a></li>
							<li class="phoneselect"><a class="page-link pjaxlink" href="/Sendoh-Akira/pages/about.html"><i class="fa fa-user"></i>&nbsp;关于</a></li>
						</ul>
				   </div>
				   
			</nav>
		</div>
	</div>
</header>

      
    <div class="content">
   	<div class="container">	
   		<div class="row">  		
   		
			<div class="col-md-3 col-lg-3 hidden-xs hidden-sm aside1 fadein-left">
				<div class="profile box-shadow center">
					<div class="overlay"></div>
					<div class="center gavatar">
						<a href="/Sendoh-Akira" class="profile_gavatar"><img class="circle" src="/Sendoh-Akira/assets/img/gavatar_2.png"></a>
					</div>
					<div class="address">
						<h5><span class="fa fa-map-marker"></span> BeiJing, China</h5>
					</div>
					<div class="center profile_desc">
						红衣佳人白衣友<br>朝与同歌暮同酒<br>世人谓我恋长安<br>其实只恋长安某<br><br><br>
					</div>
				</div>
				
				<div class="tag-cloud-text">
					<p class="center">音乐</p>
				</div>
				<div class="tag-cloud ">	
					<hr>
					<div id="player5" class="aplayer"></div>				
				</div>
				<div class="clear"></div>
				
				<div class="tag-cloud-text">
					<a href="/Sendoh-Akira/pages/tags.html" title="标签" class="pjaxlink"><p class="center">标签</p></a>
				</div>
				<div class="tag-cloud ">	
					<hr>
					<div class="page-tag">
							
								<a href="/Sendoh-Akira/pages/tags.html#life" name="life" class="pjaxlink"><i class="fa fa-tags"></i>life(3)</a>
							
								<a href="/Sendoh-Akira/pages/tags.html#java" name="java" class="pjaxlink"><i class="fa fa-tags"></i>java(2)</a>
							
								<a href="/Sendoh-Akira/pages/tags.html#android" name="android" class="pjaxlink"><i class="fa fa-tags"></i>android(15)</a>
							
								<a href="/Sendoh-Akira/pages/tags.html#linux" name="linux" class="pjaxlink"><i class="fa fa-tags"></i>linux(2)</a>
							
								<a href="/Sendoh-Akira/pages/tags.html#算法" name="算法" class="pjaxlink"><i class="fa fa-tags"></i>算法(2)</a>
							
								<a href="/Sendoh-Akira/pages/tags.html#其他" name="其他" class="pjaxlink"><i class="fa fa-tags"></i>其他(2)</a>
							
					</div>					
				</div>
				<div class="clear"></div>
				<div class="recentcome box-shadow">
	 				<p>最近访客 <i class="fa fa-user"></i></p>
	 				<ul class="ds-recent-visitors" data-num-items="15"></ul>
	 			</div>
	 			<div class="comment box-shadow">
	 				<p>最新评论 <i class="fa fa-comments"></i></p>
	 				<dl class="ds-recent-comments"  data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-title="1"  data-show-admin="1" data-excerpt-length="50"></dl>
	 			</div>

	 			
	 			<div class="recentuse">
	 					<p>经常出没</p>
	 					<hr>
	 					<ul>
		 					
	 					</ul>
	 			</div>
				
				<div class="friendlink">
	 					<p>友情链接</p>
	 					
	 			</div>
				
			</div>
			
			<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 box-shadow fadein-right aside2">					 		
					<div class="page-content" id="pjax"><div class="post">

  <header class="post-header">
    <h1 class="post-title">View滑动冲突的解决方案</h1>
    <div class="info">
	    <p class="post-meta"><i class="fa fa-calendar"></i>&nbsp;2015-11-20</p>
	    
		<i class="fa fa-tags"></i>
		<span class="index-post-tag">
		
			<a class="pjaxlink" href="/pages/tags.html#android">android</a>
		
		</span>
	    
    </div>
  </header>

  <article class="post-content">
    <blockquote>
  <p>当View的滑动存在冲突的时候怎么解决?</p>
</blockquote>

<h1 id="section">1.冲突的常见场景</h1>

<ol>
  <li>外部滑动与内部滑动方向不一致</li>
  <li>外部滑动和内部滑动方向一致</li>
  <li>(1)和(2)场景的嵌套出现</li>
</ol>

<p>例如我们在Viewpage里面嵌套使用了ListView,这样Viewpage是可以左右滑动的,但是listview同时还可以上下滑动,这样就会出现第一情况这种的滑动冲突.但是我们可能在使用并没有出现什么问题,这是因为Viewpage在内部已经解决了这个问题,所以我们可以正常的使用.要是我们在开发中也遇到类似问题怎么解决呢?其实解决的这个问题的方法是比较固定的,说难不难,说简单也简单.这就是所谓的会的不难,难的不会吧.</p>

<h1 id="section-1">2.解决冲突的办法</h1>

<p>解决思路是这样的:在分发事件的过程中根据事件的特征就确定出事件到底应该交给谁来处理,这样就不会有冲突了.根据控制事件的分发的途径,可以有一下两个方法:</p>

<p>1.外部拦截法</p>

<pre><code>public boolean onInterceptTouchEvent(MotionEvent e) {
    boolean intercepted = false;
    int x = (int) e.getX();
    int y = (int) e.getY();
    switch (e.getAction()) {
    	case MotionEvent.ACTION_DOWN:
        	intercepted = false;
        	break;
        case MotionEvent.ACTION_MOVE: 
        	if (需要拦截该事件的逻辑) {
            	intercepter = true;
            } else {
            	intercepted = false;
            }
        	break;
        case MotionEvent.ACTION_UP:
        	intercepted = false;
        	break;
        default:
        	break;
    }
    mLastXIntercept = x;
    mLastYIntercept = y;
    return intercepted;
}
</code></pre>

<p>这段代码是相对固定的,只需要修改拦截的逻辑就好了.有几点需要说明一下:
<strong><em>ACTION_DWON这个事件必须返回false,不然的话事件将无法继续分发给子View处理了;ACTION_UP事件也要返回false,不然子View的onClick事件就无法执行了;但是ACTION_MOVE就可以由我们自由控制决定是否要进行拦截了.</em></strong></p>

<p>2.内部拦截的方法
这种方法是将所有的事件都交给内部View去决定这个事件是自己处理还是交还给外部View处理.</p>

<pre><code>public boolean dispatchTouchEvent(MotionEvent e) {
	int x = (int) e.getX();
    int y = (int) e.getY();
    swtich(e.getAction()) {
		case MotionEvent.ACTION_DOWN:
        	parent.requestDisallowInterceptTouchEvent(true);
        	break;
        case MotionEvent.ACTION_MOVE:
        	int detalX = x - mLastX;
            int deltaY = y - mLastY;
            if (父容器需要拦截事件) {
            	parent.requestDisallowInterceptTouchEvent(false);
            }
        	break;
        case MotionEvent.ACTION_UP:
        	break;
        default:
        	break;
    }
    mLastX = x;
    mLastY = y;
    return super.dispatchTouchEvent(e);
}
</code></pre>

<blockquote>
  <p>public void requestDisallowInterceptTouchEvent (boolean disallowIntercept)
Called when a child does not want this parent and its ancestors to intercept touch events with onInterceptTouchEvent(MotionEvent).
This parent should pass this call onto its parents. This parent must obey this request for the duration of the touch (that is, only clear the flag after this parent has received an up or a cancel.
Parameters  –  disallowIntercept	True if the child does not want the parent to intercept touch events.</p>
</blockquote>

<p>还要重写外部View的onInterceptTouchEvent:</p>

<pre><code>public boolean onInterceptTouchEvent(MotionEvent e) {
	int action = e.getAction();
    if (MotionEvent.ACTION_DOWN == action) {
    	return false;
    } eles {
    	return true;
    }
}
</code></pre>

<p>这里,我们把所有的事件都去交给内部View去分发处理.</p>

<p>大体解决办法就这两种,这里(1)(2)(3)解决办法其实根本是一样的,只是(2)(3)仅仅通过手势是无法解决的,必须根据我们自己程序的逻辑来确定这个问题.</p>

  </article>
</div>

  <div class="prevandnext">
    	  
	    <div style="margin:0.5em;">
	    <span>上一篇 ：</span><a class="pjaxlink" href="https://wuyanfeigithub.github.io/Sendoh-Akira/2015/11/21/life-respectEveryone.html"  title="否定别人是很愚蠢的">否定别人是很愚蠢的</a>
	    </div>
	  
  	  
	    <div style="margin:0.5em;">
	    <span>下一篇 ：</span><a class="pjaxlink" href="https://wuyanfeigithub.github.io/Sendoh-Akira/2015/11/19/algorithm-hash.html"  title="数组中只出现一次的数字">数组中只出现一次的数字</a>
	    </div>
	  
	  	<div style="margin:0.5em;">
			<span> 版权所有，转载时必须以链接形式注明原始出处</span>
	    </div>
	 
  </div>
  
  <!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2015/11/20/android-dealslideproblem" data-title="View滑动冲突的解决方案" data-url="/Sendoh-Akira"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"wuyanfei"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

</div>				
			</div>
			


 		</div>	
	</div>
    </div>
    
	
	<div class="profile_social">
		<a class="rss" href="/Sendoh-Akira/feed.xml" target="_blank"></a>
		<a class="github" href="https://github.com/wuyanfeigithub"  target="_blank"></a>
		<a class="weibo" href=""  target="_blank"></a>
	</div>
	
    <div id="backtotop">
    		<a href="#"><i class="fa fa-arrow-circle-up"></i></a>
    </div>
    
    <div class="pjax_loading"></div>
    
    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Sendoh Akira's blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Sendoh Akira</li>
          <li><a href="mailto:wuyanfeijob@163.com">wuyanfeijob@163.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a class="github" href="https://github.com/wuyanfeigithub"  target="_blank"></a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">good luck</p>
      </div>
    </div>
    <div class="center sitedesc">
    	Powered by <a href ="http://jekyllrb.com/">Jekyll</a>  |  © 2016 GY  |  Hosted on <a href="https://github.com/wuyanfeigithub"> Github</a>
    </div>
  </div>
	
 
  <script type="text/javascript">
	  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
	  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
	  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
	  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
	  
	  _st('install','8i7AWfTU6yge5uNc4fmc','2.0.0');
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {equationNumbers: {
            autoNumber: ["AMS"], useLabelIds: true}},
            "HTML-CSS": {linebreaks: {automatic: true}},
            SVG: {linebreaks: {automatic: true}}
    });
   </script>
  	<!-- 多说公共JS代码 start (一个网页只需插入一次) 
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"wuyanfei"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	多说公共JS代码 end -->
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/jquery.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/bootstrap.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/jquery.pjax.js"></script> 
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/echarts.min.js"></script> 
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/prettify/prettify.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/stickUp.min.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/fancybox/jquery.mousewheel-3.0.6.pack.js"></script>
  <script type="text/javascript" src="/Sendoh-Akira/assets/js/main.js"></script>
  <link rel="stylesheet" href="/Sendoh-Akira/assets/css/duoshuo.css"> 
  <link rel="stylesheet" href="/Sendoh-Akira/search/css/cb-search.css">
							
  <script src="/Sendoh-Akira/search/js/bootstrap3-typeahead.min.js"></script>
  <script src="/Sendoh-Akira/search/js/cb-search.js"></script>
  
</footer>

	
	<script type="text/javascript" src="/Sendoh-Akira/assets/js/mp3/APlayer.min.js"></script>
  	<script type="text/javascript">
	  	var ap5 = new APlayer({
	    element: document.getElementById('player5'),
	    narrow: false,
	    autoplay: false,
	    showlrc: 3,
	    mutex: true,
	    theme: '#ad7a86',
	    mode: 'random',
	    listmaxheight: '80px',
	    music: [
	        {
	            title: 'あっちゅ～ま青春!',
	            author: '七森中☆ごらく部',
	            url: 'http://devtest.qiniudn.com/あっちゅ～ま青春!.mp3',
	            pic: 'http://devtest.qiniudn.com/あっちゅ～ま青春!.jpg',
	            lrc: '/Sendoh-Akira/assets/js/mp3/lrc/あっちゅ～ま青春!.lrc'
	        },
	        {
	            title: 'secret base~君がくれたもの~',
	            author: '茅野愛衣',
	            url: 'http://devtest.qiniudn.com/secret base~.mp3',
	            pic: 'http://devtest.qiniudn.com/secret base~.jpg',
	            lrc: '/Sendoh-Akira/assets/js/mp3/lrc/secret base~君がくれたもの~.lrc'
	        },
	        {
	            title: '回レ！雪月花',
	            author: '小倉唯',
	            url: 'http://devtest.qiniudn.com/回レ！雪月花.mp3',
	            pic: 'http://devtest.qiniudn.com/回レ！雪月花.jpg',
	            lrc: '/Sendoh-Akira/assets/js/mp3/lrc/回レ！雪月花.lrc'
	        }
	    ]
	});
	</script>
  </body>

</html>
